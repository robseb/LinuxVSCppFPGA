<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Altera HWLIB: DMA Peripheral Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="altera-logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Altera HWLIB
   &#160;<span id="projectnumber">18.1</span>
   </div>
   <div id="projectbrief">The Altera HW Manager API Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Address&#160;Space</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___a_l_t___q_s_p_i___d_m_a.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DMA Peripheral Interface</div>  </div>
<div class="ingroups"><a class="el" href="group___a_l_t___q_s_p_i.html">QSPI Flash Controller Module</a></div></div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>The DMA peripheral request controller is only used for the indirect mode of operation where data is temporarily stored in the SRAM. The QSPI flash controller uses the DMA peripheral request interface to trigger the external DMA into performing data transfers between memory and the QSPI controller.</p>
<p>There are two DMA peripheral request interfaces, one for indirect reads and one for indirect writes. The DMA peripheral request controller can issue two types of DMA requests, single or burst, to the external DMA. The number of bytes for each single or burst request is specified using the <a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga6544a397843d6b1204f500be26896878">alt_qspi_dma_config_set()</a>. The DMA peripheral request controller splits the total amount of data to be transferred into a number of DMA burst and single requests by dividing the total number of bytes by the number of bytes specified in the burst request, and then dividing the remainder by the number of bytes in a single request.</p>
<p>When programming the DMA controller, the burst request size must match the burst request size set in the quad SPI controller to avoid quickly reaching an overflow or underflow condition. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4d16f0e1e367185438c882b1e54ad69a"><td class="memItemLeft" align="right" valign="top">ALT_STATUS_CODE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga4d16f0e1e367185438c882b1e54ad69a">alt_qspi_dma_disable</a> (void)</td></tr>
<tr class="separator:ga4d16f0e1e367185438c882b1e54ad69a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7335b92adfb09af82a3e7e92e2c1765"><td class="memItemLeft" align="right" valign="top">ALT_STATUS_CODE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#gab7335b92adfb09af82a3e7e92e2c1765">alt_qspi_dma_enable</a> (void)</td></tr>
<tr class="separator:gab7335b92adfb09af82a3e7e92e2c1765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92ee264b9fe98d0acfabe3c0ac2d9d1b"><td class="memItemLeft" align="right" valign="top">ALT_STATUS_CODE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga92ee264b9fe98d0acfabe3c0ac2d9d1b">alt_qspi_dma_config_get</a> (uint32_t *single_type_sz, uint32_t *burst_type_sz)</td></tr>
<tr class="separator:ga92ee264b9fe98d0acfabe3c0ac2d9d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6544a397843d6b1204f500be26896878"><td class="memItemLeft" align="right" valign="top">ALT_STATUS_CODE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga6544a397843d6b1204f500be26896878">alt_qspi_dma_config_set</a> (const uint32_t single_type_sz, const uint32_t burst_type_sz)</td></tr>
<tr class="separator:ga6544a397843d6b1204f500be26896878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga606d361c00c9b22858b0a77b4c6804c6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga606d361c00c9b22858b0a77b4c6804c6">alt_qspi_get_device_size</a> (void)</td></tr>
<tr class="separator:ga606d361c00c9b22858b0a77b4c6804c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab9afc92bd855eabcae3174604083476"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#gaab9afc92bd855eabcae3174604083476">get_smallest_sector_size</a> (void)</td></tr>
<tr class="separator:gaab9afc92bd855eabcae3174604083476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga569a3045f783ed99905b2cb81be1691b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga569a3045f783ed99905b2cb81be1691b">alt_qspi_get_friendly_name</a> (void)</td></tr>
<tr class="separator:ga569a3045f783ed99905b2cb81be1691b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1fd01257679d3b61f446cfe2eba8e3e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#gad1fd01257679d3b61f446cfe2eba8e3e">alt_qspi_is_multidie</a> (void)</td></tr>
<tr class="separator:gad1fd01257679d3b61f446cfe2eba8e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b4f204a16d878b5f46fddbcb7e34290"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#ga2b4f204a16d878b5f46fddbcb7e34290">alt_qspi_get_die_size</a> (void)</td></tr>
<tr class="separator:ga2b4f204a16d878b5f46fddbcb7e34290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab43004b26af75996d0a79de8d82236bc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_l_t___q_s_p_i___d_m_a.html#gab43004b26af75996d0a79de8d82236bc">alt_qspi_get_page_size</a> (void)</td></tr>
<tr class="separator:gab43004b26af75996d0a79de8d82236bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga4d16f0e1e367185438c882b1e54ad69a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ALT_STATUS_CODE alt_qspi_dma_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable the QSPI DMA peripheral interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab7335b92adfb09af82a3e7e92e2c1765"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ALT_STATUS_CODE alt_qspi_dma_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable the QSPI DMA peripheral interface.</p>
<p>Enable the QSPI DMA handshaking logic. When enabled the QSPI will trigger DMA transfer requests via the DMA peripheral interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga92ee264b9fe98d0acfabe3c0ac2d9d1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ALT_STATUS_CODE alt_qspi_dma_config_get </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>single_type_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>burst_type_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current DMA peripheral configuration.</p>
<p>This function returns the QSPI DMA peripheral interface single and burst type transfer size configurations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">single_type_sz</td><td>[out] The number of bytes for each DMA single type request. Value must be a power of 2 between 1 and 32728.</td></tr>
    <tr><td class="paramname">burst_type_sz</td><td>[out] The number of bytes for each DMA burst type request. Value must be a power of 2 between 1 and 32728.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6544a397843d6b1204f500be26896878"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ALT_STATUS_CODE alt_qspi_dma_config_set </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>single_type_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>burst_type_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the DMA peripheral configuration.</p>
<p>This function configures the QSPI DMA peripheral interface single and burst type transfer sizes. The DMA configruation should be setup while the controller is idle. Because all transfers are required to be word aligned, the smallest DMA request is 4 bytes.</p>
<p>This API requires that the QSPI controller be idle, as determined by <a class="el" href="group___a_l_t___q_s_p_i___c_s_r.html#gaeaa7e762d8b79b1989385c978174b7b8">alt_qspi_is_idle()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">single_type_sz</td><td>The number of bytes for each DMA single type request. Currently limited to 4.</td></tr>
    <tr><td class="paramname">burst_type_sz</td><td>The number of bytes for each DMA burst type request. Currently limited to 4.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga606d361c00c9b22858b0a77b4c6804c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t alt_qspi_get_device_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the size of the current QSPI device </p>

</div>
</div>
<a class="anchor" id="gaab9afc92bd855eabcae3174604083476"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_smallest_sector_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the size of the smallest amount of memory that can be erased for the current QSPI device </p>

</div>
</div>
<a class="anchor" id="ga569a3045f783ed99905b2cb81be1691b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* alt_qspi_get_friendly_name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the human readable name for the current QSPI part </p>

</div>
</div>
<a class="anchor" id="gad1fd01257679d3b61f446cfe2eba8e3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool alt_qspi_is_multidie </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicates whether the qspi device is a multi-die device. This is necessary for customers who wish to DMA to qspi and must change dies before switching</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Whether or not the device is multi-die </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2b4f204a16d878b5f46fddbcb7e34290"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t alt_qspi_get_die_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the device is a multi-die device, this function will return the size of each die. This is necessary for customers who wish to DMA to qspi and must change dies before switching</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint32_t</td><td>The size of each die in a multi-die device </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab43004b26af75996d0a79de8d82236bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t alt_qspi_get_page_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicates the page-size of the qspi device. This can be useful for aligning read/writes for optimization</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint32_t</td><td>The device page-size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 13 2018 01:57:45 for Altera HWLIB by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
